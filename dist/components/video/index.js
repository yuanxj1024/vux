/*!
 * Vux v0.1.3 (https://vux.li)
 * Licensed under the MIT license
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.vuxVideo=t():e.vuxVideo=t()}(this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){e.exports=i(5)},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(2),s=n(o);console.log(s["default"]),t["default"]={props:{cover:String,video:String},ready:function(){this._player=(0,s["default"])(this.$el.querySelector("video")),console.log(this._player)}}},function(e,t){"use strict";function i(e,t){return parseInt(e.style[t]||getComputedStyle(e,null).getPropertyValue(t))}function n(e,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)}function o(e,t){e.classList?e.classList.add(t):n(e,t)||(e.className+=""+t)}function s(e,t){e.classList?e.classList.remove(t):n(e,t)&&(e.className=e.className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," ").replace(/^\s+|\s+$/g,""))}function a(e,t){(!isFinite(e)||e<0)&&(e=0);var i=t.alwaysShowHours?[0]:[];return Math.floor(e/3600)%24&&i.push(Math.floor(e/3600)%24),i.push(Math.floor(e/60)%60),i.push(Math.floor(e%60)),i=i.join(":"),1==t.timeFormatType&&(i=i.replace(/(:|^)([0-9])(?=:|$)/g,"$10$2")),i}function r(){return document.fullscreenElement||document.mozFullScreen||document.webkitIsFullScreen}function l(e){e=e.toLowerCase().split("?")[0];var t=e.substring(e.lastIndexOf(".")+1),i=/mp4|m4v|ogg|ogv|m3u8|webm|webmv|wmv|mpeg|mov/gi.test(t)?"video/":"audio/";switch(t){case"mp4":case"m4v":case"m4a":return i+"mp4";case"webm":case"webma":case"webmv":return i+"webm";case"ogg":case"oga":case"ogv":return i+"ogg";case"m3u8":return"application/x-mpegurl";case"ts":return i+"mp2t";default:return i+t}}function d(e,t){return e&&!t?l(e):t&&~t.indexOf(";")?t.substr(0,t.indexOf(";")):t}function u(e,t,i){var n,o,s,a=[];if(t.type)if("string"==typeof t.type)a.push({type:t.type,url:i});else for(n=0;n<t.type.length;n++)a.push({type:t.type[n],url:i});else if(null!==i)a.push({type:d(i,e.getAttribute("type")),url:i});else for(n=0;n<e.children.length;n++)o=e.children[n],1==o.nodeType&&"source"==o.tagName.toLowerCase()&&(i=o.getAttribute("src"),a.push({type:d(i,o.getAttribute("type")),url:i}));if(c.features.isBustedAndroid&&(e.canPlayType=function(e){return/video\/(mp4|m4v)/i.test(e)?"maybe":""}),c.features.isChromium&&(e.canPlayType=function(e){return/video\/(webm|ogv|ogg)/i.test(e)?"maybe":""}),c.features.supportsCanPlayType)for(n=0;n<a.length;n++)if("video/m3u8"==a[n].type||""!==e.canPlayType(a[n].type).replace(/no/,"")||""!==e.canPlayType(a[n].type.replace(/mp3/,"mpeg")).replace(/no/,"")||""!==e.canPlayType(a[n].type.replace(/m4a/,"mp4")).replace(/no/,"")){s=!0;break}return s}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){return new c.MediaPlayer(e,t)};var c={};c.config={type:"",mediaTitle:"",nativeControls:!1,autoplay:!1,preload:"none",videoWidth:"100%",videoHeight:"auto",aspectRation:16/9,audioWidth:"100%",audioHeight:44,autoLoop:!1,timeFormatType:1,alwaysShowHours:!1,alwaysShowControls:!1,hideVideoControlsOnLoad:!1,enableFullscreen:!0,pauseOtherPlayers:!0,duration:0,success:null,error:null},function(e){var t=window.navigator.userAgent.toLowerCase(),i=document.createElement("video");e.isiOS=/iphone|ipod|ipad/i.test(t)&&!window.MSStream,e.isAndroid=/android/i.test(t)&&!window.MSStream,e.isBustedAndroid=/android 2\.[12]/i.test(t),e.isChromium=/chromium/i.test(t),e.hasTouch="ontouchstart"in window,e.supportsCanPlayType="undefined"!=typeof i.canPlayType,e.isVendorBigPlay=/iphone/i.test(t)&&!window.MSStream,e.isVendorControls=/baidu/i.test(t),e.isVendorFullscreen=/micromessenger|weibo/i.test(t),e.isVendorAutoplay=/v819mini/i.test(t)||e.isiOS,e.nativeFullscreenPrefix=function(){return i.requestFullScreen?"":i.webkitRequestFullScreen?"webkit":i.mozRequestFullScreen?"moz":i.msRequestFullScreen?"ms":"-"}(),e.hasOldNativeFullScreen="-"==e.nativeFullscreenPrefix&&i.webkitEnterFullscreen,e.hasOldNativeFullScreen&&/mac os x 10_5/i.test(t)&&(e.nativeFullscreenPrefix="-",e.hasOldNativeFullScreen=!1)}(c.features={});var p=0;c.players={},c.MediaPlayer=function(e,t){var i,n=this;if(!e.isInstantiated){e.isInstantiated=!0,n.media=e;var o=n.media.tagName.toLowerCase();if(/audio|video/.test(o)){n.isVideo="video"===o,n.options={};for(i in c.config)n.options[i]=c.config[i];try{for(i in t)n.options[i]=t[i];var s=JSON.parse(n.media.getAttribute("data-config"));for(i in s)n.options[i]=s[i]}catch(a){}if(n.options.autoplay&&(n.options.autoplay=!c.features.isVendorAutoplay),n.isVideo||(n.options.alwaysShowControls=!0),n.options.nativeControls||c.features.isVendorControls)n.media.setAttribute("controls","controls");else{var r=n.media.getAttribute("src");r=""===r?null:r,u(n.media,n.options,r)?(n.id="zym_"+p++,c.players[n.id]=n,n.init()):alert("不支持此"+(n.isVideo?"视":"音")+"频")}}}},c.MediaPlayer.prototype={isControlsVisible:!0,isFullScreen:!1,setPlayerSize:function(e,t){var n=this,o=i(n.container,"width");if(e>o&&(n.width=o),n.enableAutoSize){var s=n.media.videoWidth,a=n.media.videoHeight;s&&a&&Math.abs(n.options.aspectRation-s/a)<.1&&(n.options.aspectRation=s/a),n.height=parseInt(o/n.options.aspectRation)}n.container.style.width=n.width+"px",n.media.style.height=n.container.style.height=n.height+"px"},showControls:function(){var e=this;e.isControlsVisible||(e.controls.style.bottom=0,e.options.mediaTitle&&(e.title.style.top=0),e.isControlsVisible=!0)},hideControls:function(){var e=this;e.isControlsVisible&&!e.options.alwaysShowControls&&(e.controls.style.bottom="-45px",e.options.mediaTitle&&(e.title.style.top="-35px"),e.isControlsVisible=!1)},setControlsTimer:function(e){var t=this;clearTimeout(t.controlsTimer),t.controlsTimer=setTimeout(function(){t.hideControls()},e)},updateTimeline:function(e){var t=this,n=void 0!==e?e.target:t.media,o=null,s=i(t.slider,"width");if(n.buffered&&n.buffered.length>0&&n.buffered.end&&n.duration?o=n.buffered.end(n.buffered.length-1)/n.duration:void 0!==n.bytesTotal&&n.bytesTotal>0&&void 0!==n.bufferedBytes?o=n.bufferedBytes/n.bytesTotal:e&&e.lengthComputable&&0!==e.total&&(o=e.loaded/e.total),null!==o&&(o=Math.min(1,Math.max(0,o)),t.loaded.style.width=s*o+"px",t.media.paused&&setTimeout(function(){t.loaded.style.width=s*o+"px",t.updateTimeline()},300)),void 0!==t.media.currentTime&&t.media.duration){var a=Math.round(s*t.media.currentTime/t.media.duration);t.current.style.width=a+"px",t.handle.style.left=a-Math.round(i(t.handle,"width")/2)+"px"}},updateTime:function(){var e=this;e.currentTime.innerHTML=a(e.media.currentTime,e.options),(e.options.duration>1||e.media.duration>1)&&(e.durationDuration.innerHTML=a(e.options.duration>1?e.options.duration:e.media.duration,e.options))},enterFullScreen:function(){var e=this;if(e.normalHeight=i(e.container,"height"),e.normalWidth=i(e.container,"width"),"-"!=c.features.nativeFullscreenPrefix)e.container[c.features.nativeFullscreenPrefix+"RequestFullScreen"]();else if(c.features.hasOldNativeFullScreen)return void e.media.webkitEnterFullscreen();o(document.documentElement,"zy_fullscreen"),e.media.style.width=e.container.style.width="100%",e.media.style.height=e.container.style.height="100%",o(e.fullscreenBtn,"zy_unfullscreen"),e.isFullScreen=!0},exitFullScreen:function(){var e=this;(r()||e.isFullScreen)&&("-"!=c.features.nativeFullscreenPrefix?document[c.features.nativeFullscreenPrefix+"CancelFullScreen"]():c.features.hasOldNativeFullScreen&&document.webkitExitFullscreen()),s(document.documentElement,"zy_fullscreen"),e.media.style.width=e.container.style.width=e.normalWidth+"px",e.media.style.height=e.container.style.height=e.normalHeight+"px",s(e.fullscreenBtn,"zy_unfullscreen"),e.isFullScreen=!1},buildContainer:function(){var e=this;e.container=e.media.parentNode,e.container.style.overflow="hidden",e.container.style.height=(e.isVideo?i(e.container,"width")/e.options.aspectRation:e.options.audioHeight)+"px",e.container.innerHTML='<div class="zy_wrap"></div><div class="zy_controls"></div>'+(e.options.mediaTitle?'<div class="zy_title">'+e.options.mediaTitle+"</div>":""),e.title=e.container.querySelector(".zy_title"),e.media.setAttribute("preload",e.options.preload),e.container.querySelector(".zy_wrap").appendChild(e.media),e.controls=e.container.querySelector(".zy_controls"),e.isVideo&&(e.width=e.options.videoWidth,e.height=e.options.videoHeight,"100%"==e.width&&"auto"==e.height&&(e.enableAutoSize=!0),e.setPlayerSize(e.width,e.height))},buildPlaypause:function(){function e(e){(t.media.isUserClick||t.options.autoplay)&&("play"===e?(s(i,"zy_play"),o(i,"zy_pause")):(s(i,"zy_pause"),o(i,"zy_play")))}var t=this,i=document.createElement("div");i.className="zy_playpause_btn zy_play",t.controls.appendChild(i),i.addEventListener("click",function(){t.media.isUserClick=!0,t.media.paused?(t.media.play(),t.media.paused||t.options.alwaysShowControls||t.setControlsTimer(3e3)):t.media.pause()}),t.media.addEventListener("play",function(){e("play")}),t.media.addEventListener("playing",function(){e("play")}),t.media.addEventListener("pause",function(){e("pse")}),t.media.addEventListener("paused",function(){e("pse")})},buildTimeline:function(){var e=this,t=document.createElement("div");t.className="zy_timeline",t.innerHTML='<div class="zy_timeline_slider"><div class="zy_timeline_buffering" style="display:none"></div><div class="zy_timeline_loaded"></div><div class="zy_timeline_current"></div><div class="zy_timeline_handle"></div></div>',e.controls.appendChild(t),e.slider=t.children[0],e.buffering=e.slider.children[0],e.loaded=e.slider.children[1],e.current=e.slider.children[2],e.handle=e.slider.children[3];var n=!1,o=e.slider.offsetLeft,s=i(e.slider,"width"),a=function(t){var i,a=0;i=t.changedTouches?t.changedTouches[0].pageX:t.pageX,e.media.duration&&(i<o?i=o:i>s+o&&(i=s+o),a=(i-o)/s*e.media.duration,n&&a!==e.media.currentTime&&(e.media.currentTime=a))};c.features.hasTouch?e.slider.addEventListener("touchstart",function(t){n=!0,a(t),o=e.slider.offsetLeft,s=i(e.slider,"width"),e.slider.addEventListener("touchmove",a),e.slider.addEventListener("touchend",function(t){n=!1,e.slider.removeEventListener("touchmove",a)})}):e.slider.addEventListener("mousedown",function(t){n=!0,a(t),o=e.slider.offsetLeft,s=i(e.slider,"width"),e.slider.addEventListener("mousemove",a),e.slider.addEventListener("mouseup",function(t){n=!1,e.slider.addEventListener("mousemove",a)})}),e.slider.addEventListener("mouseenter",function(t){e.slider.addEventListener("mousemove",a)}),e.slider.addEventListener("mouseleave",function(t){n||e.slider.removeEventListener("mousemove",a)}),e.media.addEventListener("timeupdate",function(t){e.updateTimeline(t)})},buildTime:function(){var e=this,t=document.createElement("div");t.className="zy_time",t.innerHTML='<span class="zy_currenttime">'+a(0,e.options)+'</span>/<span class="zy_duration">'+a(e.options.duration,e.options)+"</span>",e.controls.appendChild(t),e.currentTime=t.children[0],e.durationDuration=t.children[1],e.media.addEventListener("timeupdate",function(){e.updateTime()})},buildFullscreen:function(){var e=this;if("-"!=c.features.nativeFullscreenPrefix){var t=function(t){e.isFullScreen&&(r()||e.exitFullScreen())};document.addEventListener(c.features.nativeFullscreenPrefix+"fullscreenchange",t)}e.fullscreenBtn=document.createElement("div"),e.fullscreenBtn.className="zy_fullscreen_btn",e.controls.appendChild(e.fullscreenBtn),e.fullscreenBtn.addEventListener("click",function(){"-"!=c.features.nativeFullscreenPrefix&&r()||e.isFullScreen?e.exitFullScreen():e.enterFullScreen()})},buildDec:function(){var e=this,t=document.createElement("div");t.className="dec_loading",t.style.display="none",e.container.appendChild(t);var i=document.createElement("div");i.className="dec_error",i.style.display="none",i.innerHTML="播放异常",e.container.appendChild(i);var n=document.createElement("div");c.features.isVendorBigPlay||(n.className="dec_play",e.container.appendChild(n),n.addEventListener("click",function(){e.media.isUserClick=!0,e.media.play(),e.media.paused||e.options.alwaysShowControls||e.setControlsTimer(3e3)})),e.media.addEventListener("play",function(){e.media.isUserClick&&(n.style.display="none",t.style.display="",e.buffering.style.display="none")}),e.media.addEventListener("playing",function(){n.style.display="none",t.style.display="none",e.buffering.style.display="none",i.style.display="none"}),e.media.addEventListener("seeking",function(){t.style.display="",n.style.display="none",e.buffering.style.display=""}),e.media.addEventListener("seeked",function(){t.style.display="none",e.buffering.style.display="none"}),e.media.addEventListener("pause",function(){n.style.display=""}),e.media.addEventListener("waiting",function(){t.style.display="",n.style.display="none",e.buffering.style.display=""}),e.media.addEventListener("error",function(o){t.style.display="none",n.style.display="",e.buffering.style.display="none",e.media.pause(),i.style.display="","function"==typeof e.options.error&&e.options.error(o)})},init:function(){var e=this,t=["Container","Playpause","Timeline","Time"];e.options.enableFullscreen&&!c.features.isVendorFullscreen&&e.isVideo&&t.push("Fullscreen"),e.isVideo&&t.push("Dec");for(var i=0;i<t.length;i++)try{e["build"+t[i]]()}catch(n){}e.isVideo&&(c.features.hasTouch?e.media.addEventListener("click",function(){e.isControlsVisible?e.hideControls():(e.showControls(),e.media.paused||e.options.alwaysShowControls||e.setControlsTimer(3e3))}):(e.media.addEventListener("click",function(){e.media.paused?e.media.play():e.media.pause()}),e.container.addEventListener("mouseenter",function(){e.showControls(),e.options.alwaysShowControls||e.setControlsTimer(3e3)}),e.container.addEventListener("mousemove",function(){e.showControls(),e.options.alwaysShowControls||e.setControlsTimer(3e3)})),e.options.hideVideoControlsOnLoad&&e.hideControls(),e.media.addEventListener("loadedmetadata",function(t){e.enableAutoSize&&setTimeout(function(){isNaN(e.media.videoHeight)||e.setPlayerSize()},50)})),e.media.addEventListener("play",function(){var t;for(var i in c.players)if(t=c.players[i],t.id!=e.id&&e.options.pauseOtherPlayers&&!t.paused&&!t.ended)try{t.media.pause()}catch(n){}}),window.addEventListener("orientationchange",function(){setTimeout(function(){e.setPlayerSize()},500)}),e.media.addEventListener("ended",function(t){e.media.currentTime=0,e.options.autoLoop?e.media.play():(e.isVideo&&setTimeout(function(){e.container.querySelector(".dec_loading").style.display="none"},20),e.media.pause()),e.updateTimeline(t)}),e.media.addEventListener("loadedmetadata",function(t){e.updateTime()}),e.options.autoplay&&(e.media.isUserClick=!1,e.media.play()),"function"==typeof e.options.success&&e.options.success(e.media)}}},function(e,t){},function(e,t){e.exports=' <div class=zy_media> <video :poster=cover data-config=\'{"mediaTitle": "《疯狂动物城》--腾讯视频"}\'> <source :src=video type=video/mp4> 您的浏览器不支持HTML5视频 </video> </div> '},function(e,t,i){var n,o;i(3),n=i(1),o=i(4),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)}])});